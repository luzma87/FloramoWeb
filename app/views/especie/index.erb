<% has_permission = %w(admin editor).include?(@user.role) %>
<% if has_permission %>
    <a href="/especies/create" class="btn-floating btn-large waves-effect waves-light green add-element-button">
      <i class="fa fa-plus"></i>
    </a>
<% end %>

<div class="row">
  <div class="input-field col s4 offset-s2">
    <input type="text" id="buscar">
    <label for="buscar">Buscar</label>
  </div>
</div>

<% especies.each do |especie| %>
    <% url = "/especies/edit/#{especie.genero_nombre}_#{especie.nombre}" %>
    <a href="<%= has_permission ? url : '#' %>" class="hoverable card especie-wrapper waves-effect waves-teal">
      <img src="<%= especie.thumbnail_path %>" class="responsive-img thumbnail">
      <div class="especie-info">
        <div class="especie-nombre">
          <%= especie.nombre_cientifico %>
        </div>
        <div class="especie-familia">
          <%= especie.familia_nombre %>
        </div>
        <div class="especie-detalles">
          <img src="icons/ic_fv_<%= especie.forma_vida1_nombre %>.png" class="especie-detalle ic_fv_<%= especie.forma_vida1_nombre %>">
          <img src="icons/ic_fv_<%= especie.forma_vida2_nombre %>.png" class="especie-detalle ic_fv_<%= especie.forma_vida2_nombre %>">
          <img src="icons/ic_cl_<%= especie.color1_nombre %>.png" class="especie-detalle ic_cl_<%= especie.color1_nombre %>">
          <img src="icons/ic_cl_<%= especie.color2_nombre %>.png" class="especie-detalle ic_cl_<%= especie.color2_nombre %>">
        </div>
      </div>
    </a>
<% end %>


<script type="text/javascript">
    $(document).ready(function () {
        $("#buscar").keyup(function () {
            $(".especie-wrapper").hide();
            $(".especie-wrapper:contains('" + $(this).val() + "')").show();
        });
    });
</script>
