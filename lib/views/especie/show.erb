<div class="row">
  <div class="col s12 m7">
    <div class="card">
      <div class="card-image">
        <img src="<%= especie.default_foto_path %>">
        <span class="card-title text-shadow"><%= especie.nombre_cientifico %></span>
      </div>
      <div class="card-content">
        <form action="/especies/save" method="POST">
          <input type="hidden" name="id" value="<%= especie.id %>">
          <div class="row">
            <div class="input-field col s4">
              <input type="text" id="familia_nombre" name="familia_nombre" class="autocomplete validate" value="<%= especie.familia_nombre %>">
              <label for="familia_nombre">Familia</label>
            </div>
            <div class="input-field col s4">
              <input id="genero_nombre" name="genero_nombre" type="text" class="autocomplete validate" value="<%= especie.genero_nombre %>">
              <label class="active" for="genero_nombre">Género</label>
            </div>
            <div class="input-field col s4">
              <input id="nombre" name="nombre" type="text" class="validate" value="<%= especie.nombre %>">
              <label class="active" for="nombre">Especie</label>
            </div>
          </div>

          <div class="row">
            <div class="input-field col s4">
              <select id="color1" name="color1" class="icons">
                <option value="" disabled selected>Select</option>
                <option value="" selected>None</option>
                <% colores.each do |color| %>
                    <option <%= especie.color1_nombre == color.nombre ? 'selected' : '' %> value="<%= color.id %>" data-icon="<%= color.icon %>">
                      <%= color.nombre.capitalize %>
                    </option>
                <% end %>
              </select>
              <label for="color1">Color 1</label>
            </div>
            <div class="input-field col s4">
              <select id="color2" name="color2" class="icons">
                <option value="" disabled selected>Select</option>
                <option value="" selected>None</option>
                <% colores.each do |color| %>
                    <option <%= especie.color2_nombre == color.nombre ? 'selected' : '' %> value="<%= color.id %>" data-icon="<%= color.icon %>">
                      <%= color.nombre.capitalize %>
                    </option>
                <% end %>
              </select>
              <label for="color2">Color 2</label>
            </div>
          </div>

          <div class="row">
            <div class="input-field col s4">
              <select id="forma_vida1" name="forma_vida1" class="icons">
                <option value="" disabled selected>Select</option>
                <option value="" selected>None</option>
                <% formas_vida.each do |forma_vida| %>
                    <option <%= especie.forma_vida1_nombre == forma_vida.nombre ? 'selected' : '' %> value="<%= forma_vida.id %>" data-icon="<%= forma_vida.icon %>">
                      <%= forma_vida.nombre.capitalize %>
                    </option>
                <% end %>
              </select>
              <label for="forma_vida1">Forma vida 1</label>
            </div>
            <div class="input-field col s4">
              <select id="forma_vida2" name="forma_vida2" class="icons">
                <option value="" disabled selected>Select</option>
                <option value="" selected>None</option>
                <% formas_vida.each do |forma_vida| %>
                    <option <%= especie.forma_vida2_nombre == forma_vida.nombre ? 'selected' : '' %> value="<%= forma_vida.id %>" data-icon="<%= forma_vida.icon %>">
                      <%= forma_vida.nombre.capitalize %>
                    </option>
                <% end %>
              </select>
              <label for="forma_vida2">Forma vida 2</label>
            </div>
          </div>

          <ul class="collapsible popout" data-collapsible="accordion">
            <li>
              <div class="collapsible-header">
                <i class="fa fa-language"></i> Español
              </div>
              <div class="collapsible-body">
                <div class="row">
                  <div class="input-field col s12">
                    <textarea id="descripcion_es" name="descripcion_es" class="materialize-textarea"><%= especie.descripcion_es %></textarea>
                    <label for="descripcion_es">Descripción</label>
                  </div>
                </div>
                <div class="row">
                  <div class="input-field col s12">
                    <textarea id="distribucion_es" name="distribucion_es" class="materialize-textarea"><%= especie.distribucion_es %></textarea>
                    <label for="distribucion_es">Distribución</label>
                  </div>
                </div>
              </div>
            </li>
            <li>
              <div class="collapsible-header">
                <i class="fa fa-language"></i> English
              </div>
              <div class="collapsible-body">
                <div class="row">
                  <div class="input-field col s12">
                    <textarea id="descripcion_en" name="descripcion_en" class="materialize-textarea"><%= especie.descripcion_en %></textarea>
                    <label for="descripcion_en">Description</label>
                  </div>
                </div>
                <div class="row">
                  <div class="input-field col s12">
                    <textarea id="distribucion_en" name="distribucion_en" class="materialize-textarea"><%= especie.distribucion_en %></textarea>
                    <label for="distribucion_en">Distribution</label>
                  </div>
                </div>
              </div>
            </li>
          </ul>

          <div class="row">
            <div class="carousel">
              <% especie.fotos.each do |foto| %>
                  <a class="carousel-item" href="#<%= foto.id %>!"><img src="<%= foto.foto_path %>"></a>
              <% end %>
            </div>
          </div>
          <div class="row">
            <div class="col s1">
              <a href="#" id="carouselPrev">Prev</a>
            </div>
            <div class="col s1 offset-s10">
              <a href="#" id="carouselNext">Next</a>
            </div>
          </div>

          <div class="row">
            <div class="col s12 center-align">
              <button type="submit" class="waves-effect waves-light btn green ">
                <i class="fa fa-floppy-o"></i>
                Guardar
              </button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript">
    $(document).ready(function () {
        Materialize.updateTextFields();
        $('select').material_select();
        $('.carousel').carousel();

        $("#carouselPrev").click(function (event) {
            event.preventDefault();
            $('.carousel').carousel('prev');
        });

        $("#carouselNext").click(function (event) {
            event.preventDefault();
            $('.carousel').carousel('next');
        });

        $('#familia').autocomplete({
            data: <%= familias %>
        });

        $('#genero').autocomplete({
            data: <%= generos %>
        });

    });
</script>
